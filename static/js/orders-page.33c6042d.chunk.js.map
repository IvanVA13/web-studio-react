{"version":3,"sources":["components/OrderList/OrderList.module.scss","components/OrderList/OrderList.js","views/OrdersPage.js"],"names":["module","exports","OrderList","toggleModal","setToggleModal","useState","orderId","setOrderId","dispatch","useDispatch","useEffect","fetchOrders","orders","useSelector","getAllOrders","toggleModalClick","e","_e$currentTarget","currentTarget","id","prevToggle","_jsxs","Container","type","children","_jsx","className","styles","concat","map","_ref","_id","productType","createdAt","comment","status","btn","date","Date","newDate","toLocaleString","newType","toUpperCase","slice","button","disabled","onClick","Confirm","title","closeModal","confirmAct","cancelOrderClick","updateOrderStatus","posAbsolute","OrdersPage"],"mappings":"+GACAA,EAAOC,QAAU,CAAC,OAAS,0BAA0B,YAAY,6BAA6B,aAAa,8BAA8B,cAAc,+BAA+B,aAAe,gCAAgC,kBAAkB,mCAAmC,aAAa,8BAA8B,aAAa,8BAA8B,aAAa,8BAA8B,oBAAoB,qCAAqC,aAAa,8BAA8B,gBAAgB,iCAAiC,eAAe,gCAAgC,mBAAmB,oCAAoC,oBAAoB,qCAAqC,sBAAsB,uCAAuC,sBAAsB,uC,8GCW3xB,MAAMC,EAAYA,KACvB,MAAOC,EAAaC,GAAkBC,oBAAS,IACxCC,EAASC,GAAcF,mBAAS,IACjCG,EAAWC,cACjBC,qBAAU,KACRF,EAASG,wBAAc,GACtB,CAACH,IAEJ,MAAMI,EAASC,YAAYC,gBAKrBC,EAAmBC,IAAM,IAADC,EACvB,OAADD,QAAC,IAADA,GAAgB,QAAfC,EAADD,EAAGE,qBAAa,IAAAD,GAAhBA,EAAkBE,IACpBZ,EAAWS,EAAEE,cAAcC,IAE7Bf,GAAegB,IAAeA,GAAW,EAG3C,OACEC,eAACC,IAAS,CAACC,KAAK,QAAOC,SAAA,CACrBC,cAAA,MAAIC,UAAWC,IAAO,eAAeH,SAAC,yCACtCH,eAAA,MAAIK,UAAWC,IAAO,cAAcH,SAAA,CAClCH,eAAA,MACEK,UAAS,GAAAE,OAAKD,IAAO,cAAa,KAAAC,OAAID,IAAO,sBAAuBH,SAAA,CAGpEC,cAAA,KAAGC,UAAWC,IAAO,cAAcH,SAAC,kEACpCH,eAAA,OACEK,UAAS,GAAAE,OAAKD,IAAO,cAAa,KAAAC,OAAID,IAAO,sBAAuBH,SAAA,CAEpEC,cAAA,KAAGC,UAAS,GAAAE,OAAKD,IAAO,eAAgBH,SAAC,yCACzCC,cAAA,KACEC,UAAS,GAAAE,OAAKD,IAAO,iBAAgB,KAAAC,OAAID,IAAO,yBAA0BH,SAC3E,sHAIHC,cAAA,KACEC,UAAS,GAAAE,OAAKD,IAAO,gBAAe,KAAAC,OAAID,IAAO,wBAAyBH,SACzE,gFAfG,wBAmBLZ,EAAOiB,KAAIC,IAA4D,IAA3D,IAAEC,EAAG,YAAEC,EAAW,UAAEC,EAAS,QAAEC,EAAO,OAAEC,EAAM,IAAEC,GAAKN,EAChE,MAAMO,EAAO,IAAIC,KAAKL,GAChBM,EAAO,GAAAX,OAAMK,EAAYI,EAAKG,iBAAmB,IACjDC,EAAUT,EAAW,GAAAJ,OACpBI,EAAY,GAAGU,eAAad,OAAGI,EAAYW,MAAM,IACpD,GAEJ,OACEtB,eAAA,MAAIK,UAAWC,IAAO,cAAcH,SAAA,CAClCC,cAAA,KAAGC,UAAWC,IAAO,cAAcH,SAAEe,IACrClB,eAAA,OAAKK,UAAS,GAAAE,OAAKD,IAAO,eAAgBH,SAAA,CACxCC,cAAA,KAAGC,UAAS,GAAAE,OAAKD,IAAO,eAAgBH,SAAEiB,IAC1ChB,cAAA,KAAGC,UAAS,GAAAE,OAAKD,IAAO,kBAAmBH,SAAEU,OAE/CT,cAAA,KACEC,UAAS,GAAAE,OAAKD,IAAO,gBAAe,KAAAC,OAClCD,IAAO,gBAADC,OAAiBO,KACtBX,SAEFW,KAEDC,GACAX,cAAA,UACEC,UAAS,GAAAE,OAAKD,IAAOiB,OAAM,KAAAhB,OAAID,IAAO,cACtCJ,KAAK,SACLJ,GAAIY,EACJc,SAAqB,QAAXV,EACVW,QAAS/B,EAAiBS,SAC3B,sFApBqCO,EAwBrC,OAIV5B,GACCsB,cAACsB,IAAO,CACNC,MAAM,oKACNC,WAAYlC,EACZmC,WA5EiBC,KACvB3C,EAAS4C,4BAAkB9C,IAC3BF,GAAegB,IAAeA,GAAW,EA2EnCiC,aAAa,MAGP,EC5FDC,UAPIA,IAEf7B,cAAA,QAAAD,SACEC,cAACvB,EAAS,K","file":"static/js/orders-page.33c6042d.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"OrderList_button__2Oss6\",\"order-btn\":\"OrderList_order-btn__1eTIC\",\"order-list\":\"OrderList_order-list__1mUZ_\",\"order-title\":\"OrderList_order-title__dpj82\",\"button__icon\":\"OrderList_button__icon__RceaV\",\"order-container\":\"OrderList_order-container__3yrFL\",\"order-item\":\"OrderList_order-item__GXNFq\",\"order-date\":\"OrderList_order-date__JP_WM\",\"order-desc\":\"OrderList_order-desc__2hRxI\",\"order-desc-header\":\"OrderList_order-desc-header__14pLw\",\"order-type\":\"OrderList_order-type__2kf7c\",\"order-comment\":\"OrderList_order-comment__ZTF1J\",\"order-status\":\"OrderList_order-status__1XTfQ\",\"order-status-new\":\"OrderList_order-status-new__3OUHV\",\"order-status-done\":\"OrderList_order-status-done__yHap5\",\"order-status-cancel\":\"OrderList_order-status-cancel__1TZqk\",\"order-status-header\":\"OrderList_order-status-header__1gfkp\"};","import { useState, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nimport Container from '../Wrappers/Container';\r\nimport Confirm from '../Confirm/Confirm';\r\nimport {\r\n  fetchOrders,\r\n  getAllOrders,\r\n  updateOrderStatus,\r\n} from '../../redux/orders';\r\nimport styles from './OrderList.module.scss';\r\n\r\nexport const OrderList = () => {\r\n  const [toggleModal, setToggleModal] = useState(false);\r\n  const [orderId, setOrderId] = useState('');\r\n  const dispatch = useDispatch();\r\n  useEffect(() => {\r\n    dispatch(fetchOrders());\r\n  }, [dispatch]);\r\n\r\n  const orders = useSelector(getAllOrders);\r\n  const cancelOrderClick = () => {\r\n    dispatch(updateOrderStatus(orderId));\r\n    setToggleModal(prevToggle => !prevToggle);\r\n  };\r\n  const toggleModalClick = e => {\r\n    if (e?.currentTarget?.id) {\r\n      setOrderId(e.currentTarget.id);\r\n    }\r\n    setToggleModal(prevToggle => !prevToggle);\r\n  };\r\n\r\n  return (\r\n    <Container type=\"order\">\r\n      <h2 className={styles['order-title']}>Заказы</h2>\r\n      <ul className={styles['order-list']}>\r\n        <li\r\n          className={`${styles['order-item']} ${styles['order-item-header']}`}\r\n          key=\"header of order list\"\r\n        >\r\n          <p className={styles['order-date']}>Дата заказа</p>\r\n          <div\r\n            className={`${styles['order-desc']} ${styles['order-desc-header']}`}\r\n          >\r\n            <p className={`${styles['order-type']}`}>Услуга</p>\r\n            <p\r\n              className={`${styles['order-comment']} ${styles['order-comment-header']}`}\r\n            >\r\n              Комментарий к заказу\r\n            </p>\r\n          </div>\r\n          <p\r\n            className={`${styles['order-status']} ${styles['order-status-header']}`}\r\n          >\r\n            Статус заказа\r\n          </p>\r\n        </li>\r\n        {orders.map(({ _id, productType, createdAt, comment, status, btn }) => {\r\n          const date = new Date(createdAt);\r\n          const newDate = `${createdAt ? date.toLocaleString() : ''}`;\r\n          const newType = productType\r\n            ? `${productType[0].toUpperCase()}${productType.slice(1)}`\r\n            : '';\r\n\r\n          return (\r\n            <li className={styles['order-item']} key={_id}>\r\n              <p className={styles['order-date']}>{newDate}</p>\r\n              <div className={`${styles['order-desc']}`}>\r\n                <p className={`${styles['order-type']}`}>{newType}</p>\r\n                <p className={`${styles['order-comment']}`}>{comment}</p>\r\n              </div>\r\n              <p\r\n                className={`${styles['order-status']} ${\r\n                  styles[`order-status-${status}`]\r\n                }`}\r\n              >\r\n                {status}\r\n              </p>\r\n              {!btn && (\r\n                <button\r\n                  className={`${styles.button} ${styles['order-btn']}`}\r\n                  type=\"button\"\r\n                  id={_id}\r\n                  disabled={status === 'new' ? false : true}\r\n                  onClick={toggleModalClick}\r\n                >\r\n                  Отменить заказ\r\n                </button>\r\n              )}\r\n            </li>\r\n          );\r\n        })}\r\n      </ul>\r\n      {toggleModal && (\r\n        <Confirm\r\n          title=\"Вы точно хотите отменить заказ?\"\r\n          closeModal={toggleModalClick}\r\n          confirmAct={cancelOrderClick}\r\n          posAbsolute={true}\r\n        />\r\n      )}\r\n    </Container>\r\n  );\r\n};\r\n","import { OrderList } from '../components/OrderList/OrderList';\n\nconst OrdersPage = () => {\n  return (\n    <main>\n      <OrderList />\n    </main>\n  );\n};\nexport default OrdersPage;\n"],"sourceRoot":""}